package example

+ Test class {
  
  - a:int;
  - 1 -> b:int;
  - c() = {return 1;}:int

  + ^ main(argv:Array[String]) = {

    System.out.println("c()="+new Test().c())
    0->a:int
    0->b:int
    System.out.println("1+2+3="+(1+2+3->a->b))
    System.out.println("1+2+3="+((1->b)+2+3->a))
    System.out.println("1*2+3="+(1*2+3))
    System.out.println("(1+2)*3="+((1+2)*3))
    System.out.println("-(1+2*3)="+ -(1+2*3))
    System.out.println("(-1+2*3)="+ (-1+2*3))

    System.out.println("eq="+new Test().eval(new Int(1)))
    System.out.println("eq="+new Test().eval(new Add(new Int(1),new Int(2))))
  }:void

  - eval(e:E):int = {
    e match {
      | Int => return $._1
      | Add =>
        eval($._1) -> a:int
        eval($._2) -> b:int
        return a + b
    }
    return 0
  }

  ^ Point class(x:int, y:int);
  ^ Point3D class(x:int, y:int, z:int);
  ^ E class();
  ^ E :> Int class(int);
  ^ E :> Add class(E,E);

}
